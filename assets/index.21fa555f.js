import{A as P,B as d,C as q,D as y,b as l,j as _,a as t,T as g,E as I}from"./index.3f4ae48d.js";import{b as S}from"./post.0765202f.js";const j="_content_1qpxj_1",C="_closeContent_1qpxj_6",T="_photo_1qpxj_14",v="_heading_1qpxj_24",f={content:j,closeContent:C,photo:T,heading:v},E="/coderockr/assets/new_post_photo_placeholder.de782b2b.png",V="_form_n0qqm_1",A={form:V},D="/coderockr/assets/pencil_icon.7d977dca.svg",L={title:"",author:"",imageUrl:"",post:""},$=P({title:d().required("Fill the title"),author:d().required("Fill the author name"),imageUrl:d().required("Fill the image URL"),post:d().required("Fill the post")});function k(){const{formState:o,...r}=q({defaultValues:L,resolver:y($)});return{errors:o.errors,touchedFields:o.touchedFields,...r}}function Q(o){const{updateImageFn:r}=o,s=k(),c=S(),{isLoading:n,isSuccess:h}=c,{errors:e,touchedFields:a,register:u,reset:U,setValue:G,watch:b}=s;l.exports.useEffect(()=>{const i=b((m,{name:p,type:J})=>{const{imageUrl:x}=m;p==="imageUrl"&&x!==void 0&&r(x)});return()=>i.unsubscribe()},[b]);async function N(i){console.log(i);try{const m=await c.mutateAsync(i);h&&U()}catch(m){const{status:p}=m;console.log(p)}}function w(i){console.log(i)}return _("form",{className:A.form,onSubmit:s.handleSubmit(N,w),children:[t(g,{disabled:n,name:"title",label:"Title",type:"text",error:e.title,touched:a.title,register:{...u("title")},placeholder:e.title&&a.title?e.title.message:""}),t(g,{disabled:n,name:"author",label:"Author",type:"text",error:e.author,touched:a.author,register:{...u("author")},placeholder:e.author&&a.author?e.author.message:""}),t(g,{disabled:n,name:"imageUrl",label:"Image URL",type:"text",error:e.imageUrl,touched:a.imageUrl,register:{...u("imageUrl")},placeholder:e.imageUrl&&a.imageUrl?e.imageUrl.message:""}),t(I,{disabled:n,rows:11,name:"post",label:"Post",error:e.post,touched:a.post,register:{...u("post")},placeholder:e.post&&a.post?e.post.message:"Hello..."}),_("button",{type:"submit",children:[t("img",{src:D}),"Create Post"]})]})}function R(o,r){const[s,c]=l.exports.useState(o);return l.exports.useEffect(()=>{const n=setTimeout(()=>{c(o)},r);return()=>{clearTimeout(n)}},[o,r]),s}function B(){const[o,r]=l.exports.useState(""),s=R(o,1e3),[c,n]=l.exports.useState(s);function h(e){r(e)}return l.exports.useEffect(()=>{n(s)},[s]),_("div",{className:f.content,children:[t("div",{className:f.photo,children:t("img",{src:s!==""?c:E})}),t("div",{className:f.heading,children:t("h3",{children:"New Post"})}),t("div",{children:t(Q,{updateImageFn:h})})]})}const H="_main_3roo6_1",z="_container_3roo6_13",F={main:H,container:z};function O(){return t("main",{className:F.main,children:t("section",{className:F.container,children:t(B,{})})})}export{O as default};
